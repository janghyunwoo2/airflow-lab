# 2\. Airflow ê¸°ë³¸ ê°œë… (Architecture) â€” Airflow 3.x ê¸°ì¤€

## ğŸ§© Airflowë¥¼ ì´í•´í•˜ëŠ” í•µì‹¬ ê´€ì 

> **AirflowëŠ” ì‹¤í–‰ ì—”ì§„ì´ ì•„ë‹ˆë¼  
> ì›Œí¬í”Œë¡œìš° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ë‹¤.**

- AirflowëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤
- ì‘ì—…ì˜ **ìˆœì„œ, ì¡°ê±´, ìŠ¤ì¼€ì¤„**ì„ ê´€ë¦¬í•œë‹¤
- ì‹¤ì œ ì²˜ë¦¬ëŠ” Python, DB, Spark, API ë“± ì™¸ë¶€ ì‹œìŠ¤í…œì´ ë‹´ë‹¹í•œë‹¤

* * *

## ğŸ“Œ Airflow 3.x ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ ë³€í™”

- API Server ë¶„ë¦¬
- DAG íŒŒì‹± ì „ìš© í”„ë¡œì„¸ìŠ¤(DAG Processor) ë„ì…
- ì»´í¬ë„ŒíŠ¸ ì±…ì„ì´ ëª…í™•í•´ì§

* * *

## ğŸ“ DAG (Directed Acyclic Graph)

- Taskë“¤ì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì •ì˜í•œ ê·¸ë˜í”„
- Directed + Acyclic
- Python ì½”ë“œë¡œ ì •ì˜

> DAGëŠ” ì •ì˜ì´ì§€ ì‹¤í–‰ì´ ì•„ë‹ˆë‹¤

* * *

## ğŸ”— Taskì™€ Operator

- Task: ì‹¤í–‰ì˜ ìµœì†Œ ë‹¨ìœ„
- Operator: Task ì‹¤í–‰ í…œí”Œë¦¿

```python
BashOperator(
    task_id="print_date",
    bash_command="date"
)
```

* * *

## ğŸ› ï¸ Airflow basic architecture

![](Files/diagram_basic_airflow_architecture.png)<br>

* * *

## â° Scheduler

- ì‹¤í–‰ ì‹œì  íŒë‹¨
- DAGRun ìƒì„±
- Taskë¥¼ Queue ìƒíƒœë¡œ ì „í™˜

* * *

## ğŸ§© DAG Processor

- DAG íŒŒì¼ íŒŒì‹± ì „ë‹´
- ë©”íƒ€ë°ì´í„° DBì— DAG êµ¬ì¡° ë°˜ì˜
- Scheduler ë¶€í•˜ ê°ì†Œ

* * *

## âš™ï¸ Executor & Worker

- Executor: ì‹¤í–‰ ìœ„ì¹˜ ê²°ì •
- Worker: ì‹¤ì œ Task ì‹¤í–‰

* * *

## ğŸŒ API Server

- REST API ì œê³µ
- Web UI / ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™

* * *

## ğŸ–¥ï¸ Web UI

- DAG ìƒíƒœ í™•ì¸
- ì‹¤í–‰/ì¤‘ì§€/ì¬ì‹œë„
- Graph / Gantt View

* * *

## ğŸ—„ï¸ Metadata Database

- DAG / Task ìƒíƒœ
- DAGRun / TaskInstance
- XCom / Variable / Connection

* * *

## â³ Triggerer

- Deferrable Task ì²˜ë¦¬
- Worker ë¦¬ì†ŒìŠ¤ ì ˆì•½

* * *

## ğŸ”„ DAG ì‹¤í–‰ íë¦„ (ìš”ì•½)

1. DAG Processor íŒŒì‹±
2. DB ë°˜ì˜
3. Scheduler íŒë‹¨
4. DAGRun ìƒì„±
5. Executor â†’ Worker ì‹¤í–‰
6. ìƒíƒœ ê¸°ë¡
7. UI/API ì¡°íšŒ

<br>